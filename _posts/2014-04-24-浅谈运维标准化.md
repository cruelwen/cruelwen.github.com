---
layout: post
title: "浅谈运维标准化"
description: ""
category: 运维技术
tags: [标准化]
---
{% include JB/setup %}

# 引言

运维在互联网行业目前已经不算是个新鲜的工种了，但是在不同规模的企业中，对运维的理解却大相径庭。

在中小企业中，运维包括系统管理、网络管理、服务管理。甚至基础建设和IT有时候也归属为运维（或者叫运营）。而在大型互联网公司，更多的职能划分下，一般运维仅指在生产环境下，对服务的维护者。至于服务器、网络等，则由更基础的部门统一维护。

而由于运维部门的职责更加单一明确，所以运维所做的工作也越发专业化。初期的运维主要是扮演操作工和救火队员的角色，而现在的运维，则在对大量重复性工作的总结和对系统及开发流程的理解之上，为了追求效率和稳定性的最大化，开始逐步转向规范的制定。规范后标准化的服务可以在标准化的运维工作环境中更有效率和稳定的运行，也就是这里所要谈的运维标准化。

# 运维准入

最早出现的运维标准就是运维准入。也就是说，满足一系列条件的服务才是可以进行运维的服务，如果不满足这些条件，则不能上线，需要进行整改。运维准入一般包括两部分：

* 规范化的目录结构和依赖：比如目录必须是`bin conf log`结构，必须有启停脚本，必须使用指定版本的第三方软件比如apache和nginx等。
* 齐全且内容完整的运维文档：包括上线流程、监控、预案等。

运维准入的出现，是运维人员开始制定标准的第一步，但是运维准入的出现，对开发人员来说却是噩梦。

要知道，虽然目录变化是个小问题，规范化版本也只是增大了测试的压力，但是光那一堆运维文档，对于最痛恨写文档的开发人员来说就是不可能完成的任务，如果还要评审，打回，转来转去的往往从软件开发完成到正式上线运行可能花费几天甚至几周。对于互联网来说，几周时间可以让一个产品成功或者直接死掉，这种延迟对互联网服务来说是致命的。

所以，运维准入虽然走出了运维标准化的第一步，但是却影响了整个产品迭代速度。于是就出现了持续发布流程和DevOPs。

# 持续发布流程和DevOPs

在对准入问题带来的负面影响进行思考后，运维人员发现，一切不流畅的缘由都是由于运维和开发的对立立场，而运维应该是开发流程的一部分，于是就出现了将发布作为开发流程的一部分的持续发布流程，也出现了一个很火的概念：DevOPs。

讲DevOPs的文章很多，这里不再多说，这里要说的是，持续发布流程虽然本不是运维人员发明的，但是却是运维人员将这个流程推向了时代的前端。原因很简单，所有的自动化部署工具都是运维人员开发的嘛。而且为了更方便推进持续发布，自然运维人员除了加入整个开发流程中外，还将这个过程抽象并规范化，制定了标准化的持续发布模型，为了保证线上环境和测试环境一致性，整个发布模型甚至渗透到了原有的持续集成测试流程中，运维人员对产品库格式，测试、沙河、小流量、全流量的步骤和方法都进行了规范化，甚至提出了标准化的持续发布的模型。

开发人员甚至感叹：运维人员野心太大，都开始做起PMO的事情了！
        
# 包管理、平台化和NoOPs

在对开发流程标准化的推进中，运维人员又发现，我们开发的一切自动化部署工具目标都是一个：从开发产出（产品库）构建出一个可在线上环境的执行程序。于是运维人员再一次将这个过程标准化，也就是现在所说的包管理。

首先，一个标准化的包一般包括以下内容： * 接口：整个包对外的接口，包括启停，健康检查，监控等功能 * 主服务：开发人员开发的功能服务 * 子服务：一些规定版本的子服务，比如crond和日志处理，也包括规定版本的容器，比如apache和tomcat * 环境：运行环境，比如规定版本的python等 * 静态文件：包括工具脚本和初始化数据等 * 操作系统：如果操作系统不统一，那包中甚至还需要包含操作系统信息，当然我们不可能把操作系统打包，所以这里一般指方便虚拟化系统创建的操作系统信息。

其次，运维人员还开发了标准化的打包工具，打包工具提供了类似编译的功能，将编译产出的主服务，打包成解压即用的运行服务。

包管理解决了服务的标准化问题，再结合无状态化和自动调度，就可以搭建一个全自动的运维平台，对开发人员来说，平台解决了从编译后到线上运行的所有问题，不需要文档，也不需要改造代码，只需要符合平台的标准，就可以使用平台进行服务的管理。这时，运维人员也不再需要在开发人员和线上服务之间充当操作工，实现NoOPs。

# 未来？

目前，国内对于NoOPs也只是在实践中，并没有非常好地可以用于大型生成环境的NoOPs实例。不过个人觉得不出两年，这一定会成为行业内的标准。

NoOPs后，运维人员也不会失业，NoOPs只是指在产品发布过程中运维人员不再参与的，但是，运维人员能做的还有很多：一部分人将变成了平台的开发人员，专注于平台的开发；而另一部分人将成为产品的工程开发工程师，负责产品的优化。
